<htmL>
  <head>
    <link rel="stylesheet" type="text/css" href="restaurant.css">
  </head>
  <body>
    <div id="container">
      <h1 id="title">Order Summary</h1>
      <hr>
      
      <table id="summaryTable">
        <tr>
          <td class="tableData">Dish</td>
          <td class="tableData">Quantity</td>
          <td class="tableData">Unit Price</td>
          <td class="lastColumn">Amount</td>
        </tr>
        <tr>
          <td>Fried Rice</td>
          <td id="qtyOfOne"></td>
          <td id="bpOne"></td>
          <td id="amountOne"></td>
        </tr>
        <tr>
          <td>Fried Noodles</td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td>Steamed Pork Bun</td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td>Egg Tart</td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td>Jasmine Tea</td>
          <td></td>
          <td>$4.49</td>
          <td></td>
        </tr>
        <tr>
          <td>Green Tea</td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
      </table>
      
      <br><br><br><br><br><br><br><br><br><br><br><br>
      
      <h2 class="dollarSign">Subtotal: $</h2><h2 class="dollarSign" id="showSubtotal">0.00</h2>
      <br>
      <h3 class="dollarSign">Tax: $</h3><h3 class="dollarSign" id="showTax">0.00</h3>
      <br>
      <input type="number" min="0" id="inputTip">
      <button onclick="tip()">Tip</button>
      <br>
      <h2 class="dollarSign">Total: $</h2><h2 class="dollarSign" id="showTotal">0.00</h2>
      <br>
      <button onclick="confirmPay()">Confirm</button>
    </div>
    
    <script>
      /*var dishCount = localStorage.getItem("storeNumberOfDishes");
      for (var i = 0; i < dishCount; i++) { //For every dish ordered ...
        //Make table
        var tble = document.getElementById('summaryTable');
        var createRow = document.createElement('tr');
        tble.appendChild(createRow);
        var createColumn = document.createElement('td');
        createRow.appendChild(createColumn);
        //4 columns
        var create2Column = document.createElement('td');
        createRow.appendChild(create2Column);
        var create3Column = document.createElement('td');
        createRow.appendChild(create3Column);
        var create4Column = document.createElement('td');
        createRow.appendChild(create4Column);
        
        //Input dish
        var getFromStorage = localStorage.getItem("storeArrOfFood");
        var convertDish = JSON.parse(getFromStorage); //converts JSON string into a JS object
        var name = convertDish[i];
        var text = document.createTextNode(name);
        createColumn.appendChild(text);
        //Input qty
        //Input base price
        //Input amount
      } */
      
      //Input quantity
      var qtyOne = localStorage.getItem("storeQtyOfOne");
      var qtytext1 = document.createTextNode(qtyOne);
      document.getElementById('qtyOfOne').innerHTML = qtytext1.textContent;

      //Input base price
      var xmlhttp = new XMLHttpRequest(); //gets content of json file
      xmlhttp.onreadystatechange = function() { //do this function when a certain criteria is met
        if (this.readyState == 4 && this.status == 200) { //"this" refers to the function we are calling; 4 is ready; 200 is ok
          var mydata = JSON.parse(this.responseText); //the json file that we get will be saved as mydata
    
          document.getElementById('bpOne').innerHTML = "$" + mydata.dish[0].price;
          /*document.getElementById('bpTwo').innerHTML = mydata.dish[1].price;
          document.getElementById('priceOne').innerHTML = mydata.dish[0].price;
          document.getElementById('nameTwo').innerHTML = mydata.dish[1].name;
          document.getElementById('descripTwo').innerHTML = mydata.dish[1].desc;
          document.getElementById('priceTwo').innerHTML = mydata.dish[1].price;*/
        }
      };
      xmlhttp.open("GET","restaurant.json",true); //get and open the json file
      xmlhttp.send(); //send the file to the server

      //Input amount
      var amtOne = localStorage.getItem("amountOne");
      var amtText1 = document.createTextNode(amtOne);
      document.getElementById('amountOne').innerHTML = "$" + amtText1.textContent;

      //Delete items that were not bought
      var buyOne = localStorage.getItem("boughtOne");
      if (buyOne === "false") {
        var deleteMe = document.getElementsByTagName('tr')[1];
        deleteMe.parentNode.removeChild(deleteMe);
      }
      var buyTwo = localStorage.getItem("boughtTwo");
      if (buyTwo === "false") {
        var deleteMe = document.getElementsByTagName('tr')[2];
        deleteMe.parentNode.removeChild(deleteMe);
      }
      
      document.getElementById('showSubtotal').innerHTML = localStorage.getItem("runningTotal"); //get and show subtotal
      document.getElementById('showTax').innerHTML = localStorage.getItem("tax"); //get and show tax
      document.getElementById('showTotal').innerHTML = localStorage.getItem('total'); //get and show total
      
      function tip() {
        var userTip = document.getElementById('inputTip').value; //get input value
        document.getElementById('inputTip').value = ""; //clear input box
        if (userTip >= 0) { //check for valid input
          var prevTotal = document.getElementById('showTotal').innerHTML; //get previous total
          var newTotal = (+userTip + +prevTotal).toFixed(2); //add tip to previous total
          document.getElementById('showTotal').innerHTML = newTotal; //display new total
        }
        else {
          window.alert("Error. Tip must be a positive whole number.");
        }
      }
      function confirmPay() {
        window.alert("Thank you for ordering at Someone's Restaurant. We hope you enjoy your meal!")
      }
    </script>
  </body>
</htmL>